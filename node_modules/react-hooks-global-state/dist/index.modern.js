import{useReducer as e,useEffect as t,useRef as r,useState as o,useCallback as n}from"react";const s=(e,t)=>{if(!e.includes(t))throw new Error(`'${t}' not found. It must be provided in initialState as a property key.`)},c="production"!==process.env.NODE_ENV?Symbol("UPDATE_STATE"):Symbol(),a=(a,l)=>{const u=Object.keys(l);let i=l,d=null;const p={};u.forEach(e=>{p[e]=new Set});const E=(e,t)=>t.type===c?t.r?t.r(e):t.e:a(e,t),f=(e,t)=>{"production"!==process.env.NODE_ENV&&s(u,e);const r=r=>{return{...r,[e]:(o=r[e],n=t,"function"==typeof n?n(o):n)};var o,n};if(d)d({type:c,r});else{i=r(i);const t=i[e];p[e].forEach(e=>e(t))}},S=(e,t)=>{u.forEach(r=>{const o=t[r];e[r]!==o&&p[r].forEach(e=>e(o))})};return{useGlobalStateProvider:()=>{const[o,n]=e(E,i);t(()=>{if(d)throw new Error("Only one global state provider is allowed");return d=n,n({type:c,e:i}),()=>{d=null}},[]);const s=r(o);S(s.current,o),s.current=o,t(()=>{i=o},[o])},useGlobalState:e=>{"production"!==process.env.NODE_ENV&&s(u,e);const[r,c]=o(i[e]);return t(()=>(p[e].add(c),c(i[e]),()=>{p[e].delete(c)}),[e]),[r,n(t=>f(e,t),[e])]},getGlobalState:e=>("production"!==process.env.NODE_ENV&&s(u,e),i[e]),setGlobalState:f,getState:()=>i,setState:e=>{if(d)d({type:c,e});else{const t=i;i=e,S(t,i)}},dispatch:e=>{if(d)d(e);else{const t=i;i=a(i,e),S(t,i)}return e}}},l=e=>a((e,t)=>e,e),u=(e,t=e(void 0,{type:void 0}),r)=>r?r(u)(e,t):a(e,t),i=()=>{if(!window.__REDUX_DEVTOOLS_EXTENSION__)return e=>e;const{before:e,after:t}=(()=>{let e,t;return{before:r=>(o,n,s)=>{if(e=o,t=n,s)return s(r)(o,n);const c=r(o,n);return{...c,useGlobalState:e=>{const[t]=c.useGlobalState(e);return[t,()=>{throw new Error("Update is not allowed when using DevTools")}]}}},after:r=>(o,n,s)=>{if(s)return s(r)(o,n);const c=r(e,t);let a={...o(n,{type:"@@redux/INIT"}),...t};const l=[];return{...c,getState:()=>a,dispatch:e=>(a=o(a,e),c.setState(a.computedStates[a.currentStateIndex].state),l.forEach(e=>e()),e),subscribe:e=>(l.push(e),()=>{const t=l.indexOf(e);l.splice(t,1)})}}}})();return((...e)=>e.reduce((e,t)=>(...r)=>e(t(...r))))(e,window.__REDUX_DEVTOOLS_EXTENSION__(),t)};export{l as createGlobalState,u as createStore,i as reduxDevToolsExt};
//# sourceMappingURL=index.modern.js.map
